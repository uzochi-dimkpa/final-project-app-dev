{"ast":null,"code":"var _jsxFileName = \"/home/udimkpa/Documents/final-project-app-dev/client/src/charts/D3Chart.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport React, { useContext } from 'react';\nimport { SessionContext } from '../contexts/SessionContext';\nimport { BudgetDisplayContext } from '../contexts/BudgetDisplayContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction D3Chart() {\n  _s();\n  const {\n    username\n  } = useContext(SessionContext);\n  const {\n    database\n  } = useContext(BudgetDisplayContext);\n\n  // console.log(username, database);\n  /*\n  function getData() {\n    axios.post('http://localhost:3010/display-guest',\n      {\n        database: database,\n        username: username\n      }\n    )\n    .then(function (res) {\n        console.log('D3Chart is unfinished!');\n        // console.log(res.data[1]);\n        // console.log(res.data[2]);\n        // console.log(res.data[3]);\n         // generateChart();\n         var svg = d3.select(\"figure#d3-donut-container\")\n        .append(\"svg\")\n        .append(\"g\")\n         svg.append(\"g\")\n            .attr(\"class\", \"slices\");\n        svg.append(\"g\")\n            .attr(\"class\", \"labels\");\n        svg.append(\"g\")\n            .attr(\"class\", \"lines\");\n    \n        var width = 960,\n            height = 450,\n            radius = Math.min(width, height) / 2;\n    \n        var pie = d3.pie()\n            .sort(null)\n            .value(function(d) {\n                return d.value;\n            });\n    \n        var arc = d3.arc()\n            .outerRadius(radius * 0.8)\n            .innerRadius(radius * 0.4);\n    \n        var outerArc = d3.arc()\n            .innerRadius(radius * 0.9)\n            .outerRadius(radius * 0.9);\n    \n        svg.attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n    \n        var key = function(d){ return d.data.label; };\n        \n        var color = d3.scaleOrdinal()\n        .domain(res.data[1])\n        .range(res.data[2]);\n    \n        // console.log(color);\n        \n        function startData() {\n            var labels = color.domain();\n            return labels.map((label, index) => {\n                return { label: label, value: res.data[3][index] } // --- JSON.parse(localStorage.getItem('amount'))[index]\n            });\n        }\n        change(startData());\n    \n        function randomData() {\n            var labels = color.domain();\n            return labels.map(function(label){\n                return { label: label, value: Math.random() }\n            });\n        }\n        // --- change(randomData());\n    \n        d3.select(\".randomize\")\n            .on(\"click\", function(){\n                // -- getColor();\n                change(randomData());\n            });\n        \n        d3.select(\".reset\")\n            .on(\"click\", function(){\n                // -- getColor();\n                change(startData());\n            });\n         function change(data) {\n             // ------- PIE SLICES -------\n            var slice = svg.select(\".slices\").selectAll(\"path.slice\")\n                .data(pie(data), key);\n    \n            slice.enter()\n                .insert(\"path\")\n                .style(\"fill\", function(d) { return color(d.data.label); })\n                .attr(\"class\", \"slice\");\n    \n            slice\t\t\n                .transition().duration(1000)\n                .attrTween(\"d\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        return arc(interpolate(t));\n                    };\n                })\n    \n            slice.exit()\n                .remove();\n    \n            // ------- TEXT LABELS -------\n    \n            var text = svg.select(\".labels\").selectAll(\"text\")\n                .data(pie(data), key);\n    \n            text.enter()\n                .append(\"text\")\n                .attr(\"dy\", \".35em\")\n                .text(function(d) {\n                    return d.data.label;\n                });\n            \n            function midAngle(d){\n                return d.startAngle + (d.endAngle - d.startAngle)/2;\n            }\n    \n            text.transition().duration(1000)\n                .attrTween(\"transform\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return \"translate(\"+ pos +\")\";\n                    };\n                })\n                .styleTween(\"text-anchor\", function(d){\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        return midAngle(d2) < Math.PI ? \"start\":\"end\";\n                    };\n                });\n    \n            text.exit()\n                .remove();\n    \n            // ------- SLICE TO TEXT POLYLINES -------\n    \n            var polyline = svg.select(\".lines\").selectAll(\"polyline\")\n                .data(pie(data), key);\n            \n            polyline.enter()\n                .append(\"polyline\");\n    \n            polyline.transition().duration(1000)\n                .attrTween(\"points\", function(d){\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return [arc.centroid(d2), outerArc.centroid(d2), pos];\n                    };\t\t\t\n                });\n            \n            polyline.exit()\n                .remove();\n        };\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  };\n  getData();\n  /**/\n\n  // function generateChart() {\n  //   console.log(d3.pie());\n  //   console.log(d3.arc());\n  //   console.log(d3.scaleOrdinal());\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"figure\", {\n    id: \"d3-donut-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n}\n_s(D3Chart, \"7U+U6AMVVd1QCB7cHEstW5rKfaM=\");\n_c = D3Chart;\nexport default D3Chart;\nvar _c;\n$RefreshReg$(_c, \"D3Chart\");","map":{"version":3,"names":["axios","d3","React","useContext","SessionContext","BudgetDisplayContext","jsxDEV","_jsxDEV","D3Chart","_s","username","database","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/udimkpa/Documents/final-project-app-dev/client/src/charts/D3Chart.js"],"sourcesContent":["import axios from 'axios';\nimport * as d3 from 'd3';\nimport React, { useContext } from 'react';\nimport { SessionContext } from '../contexts/SessionContext';\nimport { BudgetDisplayContext } from '../contexts/BudgetDisplayContext';\n\nfunction D3Chart() {\n  const { username } = useContext(SessionContext);\n  const { database } = useContext(BudgetDisplayContext);\n  \n  // console.log(username, database);\n  /*\n  function getData() {\n    axios.post('http://localhost:3010/display-guest',\n      {\n        database: database,\n        username: username\n      }\n    )\n    .then(function (res) {\n        console.log('D3Chart is unfinished!');\n        // console.log(res.data[1]);\n        // console.log(res.data[2]);\n        // console.log(res.data[3]);\n\n        // generateChart();\n\n        var svg = d3.select(\"figure#d3-donut-container\")\n        .append(\"svg\")\n        .append(\"g\")\n\n        svg.append(\"g\")\n            .attr(\"class\", \"slices\");\n        svg.append(\"g\")\n            .attr(\"class\", \"labels\");\n        svg.append(\"g\")\n            .attr(\"class\", \"lines\");\n    \n        var width = 960,\n            height = 450,\n            radius = Math.min(width, height) / 2;\n    \n        var pie = d3.pie()\n            .sort(null)\n            .value(function(d) {\n                return d.value;\n            });\n    \n        var arc = d3.arc()\n            .outerRadius(radius * 0.8)\n            .innerRadius(radius * 0.4);\n    \n        var outerArc = d3.arc()\n            .innerRadius(radius * 0.9)\n            .outerRadius(radius * 0.9);\n    \n        svg.attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n    \n        var key = function(d){ return d.data.label; };\n        \n        var color = d3.scaleOrdinal()\n        .domain(res.data[1])\n        .range(res.data[2]);\n    \n        // console.log(color);\n        \n        function startData() {\n            var labels = color.domain();\n            return labels.map((label, index) => {\n                return { label: label, value: res.data[3][index] } // --- JSON.parse(localStorage.getItem('amount'))[index]\n            });\n        }\n        change(startData());\n    \n        function randomData() {\n            var labels = color.domain();\n            return labels.map(function(label){\n                return { label: label, value: Math.random() }\n            });\n        }\n        // --- change(randomData());\n    \n        d3.select(\".randomize\")\n            .on(\"click\", function(){\n                // -- getColor();\n                change(randomData());\n            });\n        \n        d3.select(\".reset\")\n            .on(\"click\", function(){\n                // -- getColor();\n                change(startData());\n            });\n\n        function change(data) {\n\n            // ------- PIE SLICES -------\n            var slice = svg.select(\".slices\").selectAll(\"path.slice\")\n                .data(pie(data), key);\n    \n            slice.enter()\n                .insert(\"path\")\n                .style(\"fill\", function(d) { return color(d.data.label); })\n                .attr(\"class\", \"slice\");\n    \n            slice\t\t\n                .transition().duration(1000)\n                .attrTween(\"d\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        return arc(interpolate(t));\n                    };\n                })\n    \n            slice.exit()\n                .remove();\n    \n            // ------- TEXT LABELS -------\n    \n            var text = svg.select(\".labels\").selectAll(\"text\")\n                .data(pie(data), key);\n    \n            text.enter()\n                .append(\"text\")\n                .attr(\"dy\", \".35em\")\n                .text(function(d) {\n                    return d.data.label;\n                });\n            \n            function midAngle(d){\n                return d.startAngle + (d.endAngle - d.startAngle)/2;\n            }\n    \n            text.transition().duration(1000)\n                .attrTween(\"transform\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return \"translate(\"+ pos +\")\";\n                    };\n                })\n                .styleTween(\"text-anchor\", function(d){\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        return midAngle(d2) < Math.PI ? \"start\":\"end\";\n                    };\n                });\n    \n            text.exit()\n                .remove();\n    \n            // ------- SLICE TO TEXT POLYLINES -------\n    \n            var polyline = svg.select(\".lines\").selectAll(\"polyline\")\n                .data(pie(data), key);\n            \n            polyline.enter()\n                .append(\"polyline\");\n    \n            polyline.transition().duration(1000)\n                .attrTween(\"points\", function(d){\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return [arc.centroid(d2), outerArc.centroid(d2), pos];\n                    };\t\t\t\n                });\n            \n            polyline.exit()\n                .remove();\n        };\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  };\n  getData();\n  /**/\n  \n\n// function generateChart() {\n//   console.log(d3.pie());\n//   console.log(d3.arc());\n//   console.log(d3.scaleOrdinal());\n// }\n\n  return (\n    <figure id=\"d3-donut-container\"/>\n  );\n}\n\n\nexport default D3Chart;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,EAAE,MAAM,IAAI;AACxB,OAAOC,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,oBAAoB,QAAQ,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExE,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM;IAAEC;EAAS,CAAC,GAAGP,UAAU,CAACC,cAAc,CAAC;EAC/C,MAAM;IAAEO;EAAS,CAAC,GAAGR,UAAU,CAACE,oBAAoB,CAAC;;EAErD;EACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAQA;EACA;EACA;EACA;EACA;;EAEE,oBACEE,OAAA;IAAQK,EAAE,EAAC;EAAoB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;AAErC;AAACP,EAAA,CApMQD,OAAO;AAAAS,EAAA,GAAPT,OAAO;AAuMhB,eAAeA,OAAO;AAAC,IAAAS,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}