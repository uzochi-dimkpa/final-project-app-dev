{"ast":null,"code":"var _jsxFileName = \"/home/udimkpa/Documents/final-project-app-dev/client/src/charts/BarChart.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport 'chart.js/auto';\nimport { SessionContext } from '../contexts/SessionContext.js';\nimport { BudgetDisplayContext } from '../contexts/BudgetDisplayContext.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet myBarChart;\nfunction BarChart() {\n  _s();\n  const {\n    loggedIn,\n    username\n  } = useContext(SessionContext);\n  const {\n    hasAccount,\n    setHasAccount,\n    setDatabase\n  } = useContext(BudgetDisplayContext);\n  const token = window.localStorage.getItem(\"token\");\n  function createChart(data_source) {\n    if (hasAccount) {\n      var ctx = document.getElementById(\"myBarChart\").getContext(\"2d\");\n      if (myBarChart) {\n        myBarChart.destroy();\n      }\n      myBarChart = new ChartJS(ctx, {\n        type: 'bar',\n        data: data_source,\n        options: {\n          plugins: {\n            legend: {\n              display: false\n            },\n            title: {\n              display: true,\n              text: `${data_source.title}`\n            }\n          }\n        }\n      });\n    }\n  }\n  ;\n  function getBudget() {\n    const db_name = loggedIn && token ? 'personal-budget' : 'guest-budget';\n    loggedIn && token ? axios.post(`${process.env.REACT_APP_BACKEND_URL}/show-account`, {\n      username: username,\n      database: db_name\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        database: db_name,\n        username: username\n      }\n    }).then(res => {\n      // console.log('display-user');\n      // console.log(res.data);\n      if (res.data !== '') {\n        setHasAccount(true);\n        setDatabase(db_name);\n        createChart(res.data);\n      } else {\n        setHasAccount(false);\n      }\n    }).catch(err => {\n      console.log(err);\n    }) : axios.post(`${process.env.REACT_APP_BACKEND_URL}/display-guest`, {\n      database: db_name,\n      username: username\n    }).then(res => {\n      // console.log('display-guest');\n      // console.log(res.data[0]);\n      if (res.data !== '') {\n        setDatabase(db_name);\n        createChart(res.data[1]);\n        setHasAccount(true);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n  ;\n  getBudget();\n  if (hasAccount) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bar\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        id: \"myBarChart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(BarChart, \"BAPvoKRhlE2Wy422HpiP+9mDk/o=\");\n_c = BarChart;\nexport default BarChart;\nvar _c;\n$RefreshReg$(_c, \"BarChart\");","map":{"version":3,"names":["axios","React","useContext","Chart","ChartJS","SessionContext","BudgetDisplayContext","jsxDEV","_jsxDEV","myBarChart","BarChart","_s","loggedIn","username","hasAccount","setHasAccount","setDatabase","token","window","localStorage","getItem","createChart","data_source","ctx","document","getElementById","getContext","destroy","type","data","options","plugins","legend","display","title","text","getBudget","db_name","post","process","env","REACT_APP_BACKEND_URL","database","headers","then","res","catch","err","console","log","className","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/udimkpa/Documents/final-project-app-dev/client/src/charts/BarChart.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useContext } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport 'chart.js/auto'\nimport { SessionContext } from '../contexts/SessionContext.js';\nimport { BudgetDisplayContext } from '../contexts/BudgetDisplayContext.js';\n\nlet myBarChart;\n\nfunction BarChart() {\n  const { loggedIn, username } = useContext(SessionContext);\n  const { hasAccount, setHasAccount, setDatabase } = useContext(BudgetDisplayContext);\n  const token = window.localStorage.getItem(\"token\");\n  \n  function createChart(data_source) {\n    if (hasAccount) {\n      var ctx = document.getElementById(\"myBarChart\").getContext(\"2d\");\n        if (myBarChart) {\n          myBarChart.destroy();\n        }\n        \n        myBarChart = new ChartJS(ctx, {\n        type: 'bar',\n        data: data_source,\n        options: {\n          plugins: {\n            legend: {\n              display: false\n            },\n            title: {\n              display: true,\n              text: `${data_source.title}`\n            }\n          }\n        }\n      });\n    }\n  };\n\n  function getBudget() {\n  \tconst db_name = (loggedIn && token) ? 'personal-budget' : 'guest-budget';\n\n    (loggedIn && token) ?\n    axios.post(`${process.env.REACT_APP_BACKEND_URL}/show-account`,\n    {\n      username: username,\n      database: db_name\n    },\n    {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        database: db_name,\n        username: username\n      }\n    })\n    .then((res) => {\n      // console.log('display-user');\n      // console.log(res.data);\n      if (res.data !== '') {\n        setHasAccount(true);\n        setDatabase(db_name);\n        createChart(res.data);\n      } else {\n        setHasAccount(false)\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    :\n    axios.post(`${process.env.REACT_APP_BACKEND_URL}/display-guest`,\n      {\n        database: db_name,\n        username: username\n      }\n    )\n    .then((res) => {\n      // console.log('display-guest');\n      // console.log(res.data[0]);\n      if (res.data !== '') {\n        setDatabase(db_name);\n        createChart(res.data[1]);\n        setHasAccount(true);\n      } \n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  };\n  \n  getBudget();\n  \n  if (hasAccount) {\n    return (\n      <div className=\"bar\">\n          <canvas id=\"myBarChart\"/>\n      </div>\n    )\n  }\n}\n\nexport default BarChart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}