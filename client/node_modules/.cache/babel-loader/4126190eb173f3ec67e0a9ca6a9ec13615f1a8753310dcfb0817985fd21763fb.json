{"ast":null,"code":"var _jsxFileName = \"/home/udimkpa/Documents/final-project-app-dev/client/src/charts/DoughnutChart.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useState, useContext } from 'react';\nimport { Chart as ChartJS, ArcElement } from 'chart.js';\nimport 'chart.js/auto';\nimport { SessionContext } from '../contexts/SessionContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(ArcElement);\nlet myDoughnutChart;\nfunction DoughnutChart() {\n  _s();\n  const {\n    loggedIn,\n    username\n  } = useContext(SessionContext);\n  const [hasData, setHasData] = useState(false);\n  // let hasData = false;\n\n  function createChart(data_source) {\n    var ctx = document.getElementById(\"myChart\").getContext(\"2d\");\n    if (myDoughnutChart) {\n      myDoughnutChart.destroy();\n    }\n    myDoughnutChart = new ChartJS(ctx, {\n      type: 'doughnut',\n      data: data_source\n    });\n  }\n  ;\n  function getBudget() {\n    console.log('Display budget!');\n    const db_name = loggedIn ? 'personal-budget' : 'guest-budget';\n    axios.post('http://localhost:3010/display', {\n      db_name: db_name,\n      username: username\n    }).then(data => {\n      // hasData = (data !== undefined) ? true : false;\n      data ? setHasData(true) : setHasData(false);\n      console.log(data.data[0]);\n      createChart(data.data[0]);\n    });\n  }\n  ;\n  getBudget();\n  console.log(hasData);\n  return hasData ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-container\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"myChart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-container\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"myChart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(DoughnutChart, \"66rtmNKsDwBgKfsKKmWmTPr9v7w=\");\n_c = DoughnutChart;\nexport default DoughnutChart;\nvar _c;\n$RefreshReg$(_c, \"DoughnutChart\");","map":{"version":3,"names":["axios","React","useState","useContext","Chart","ChartJS","ArcElement","SessionContext","jsxDEV","_jsxDEV","register","myDoughnutChart","DoughnutChart","_s","loggedIn","username","hasData","setHasData","createChart","data_source","ctx","document","getElementById","getContext","destroy","type","data","getBudget","console","log","db_name","post","then","className","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/udimkpa/Documents/final-project-app-dev/client/src/charts/DoughnutChart.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useState, useContext } from 'react';\nimport { Chart as ChartJS, ArcElement } from 'chart.js';\nimport 'chart.js/auto';\nimport { SessionContext } from '../contexts/SessionContext';\n\nChartJS.register(ArcElement);\n\nlet myDoughnutChart;\n\nfunction DoughnutChart() {\n  const { loggedIn, username } = useContext(SessionContext);\n  const [hasData, setHasData] = useState(false);\n  // let hasData = false;\n  \n  function createChart(data_source) {\n    var ctx = document.getElementById(\"myChart\").getContext(\"2d\");\n      if (myDoughnutChart) {\n        myDoughnutChart.destroy();\n      }\n      \n      myDoughnutChart = new ChartJS(ctx, {\n      type: 'doughnut',\n      data: data_source,\n    });\n  };\n\n  function getBudget() {\n  \tconsole.log('Display budget!');\n  \n  \tconst db_name = (loggedIn) ? 'personal-budget' : 'guest-budget';\n\n    axios.post('http://localhost:3010/display',\n      {\n        db_name: db_name,\n        username: username\n      }\n    )\n    .then((data) => {\n      // hasData = (data !== undefined) ? true : false;\n      (data) ? setHasData(true) : setHasData(false);\n\n      console.log(data.data[0]);\n      createChart(data.data[0]);\n    });\n  };\n  \n  getBudget();\n  \n  console.log(hasData);\n\n  return (\n    (hasData) ?\n    <div className=\"chart-container\">\n        <canvas id=\"myChart\"/>\n    </div>\n    :\n    <div className=\"chart-container\">\n        <canvas id=\"myChart\"/>\n    </div>\n  )\n}\n\nexport default DoughnutChart;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SAASC,KAAK,IAAIC,OAAO,EAAEC,UAAU,QAAQ,UAAU;AACvD,OAAO,eAAe;AACtB,SAASC,cAAc,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5DJ,OAAO,CAACK,QAAQ,CAACJ,UAAU,CAAC;AAE5B,IAAIK,eAAe;AAEnB,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACvB,MAAM;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAGZ,UAAU,CAACI,cAAc,CAAC;EACzD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC7C;;EAEA,SAASgB,WAAWA,CAACC,WAAW,EAAE;IAChC,IAAIC,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,UAAU,CAAC,IAAI,CAAC;IAC3D,IAAIZ,eAAe,EAAE;MACnBA,eAAe,CAACa,OAAO,CAAC,CAAC;IAC3B;IAEAb,eAAe,GAAG,IAAIN,OAAO,CAACe,GAAG,EAAE;MACnCK,IAAI,EAAE,UAAU;MAChBC,IAAI,EAAEP;IACR,CAAC,CAAC;EACJ;EAAC;EAED,SAASQ,SAASA,CAAA,EAAG;IACpBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAE9B,MAAMC,OAAO,GAAIhB,QAAQ,GAAI,iBAAiB,GAAG,cAAc;IAE9Dd,KAAK,CAAC+B,IAAI,CAAC,+BAA+B,EACxC;MACED,OAAO,EAAEA,OAAO;MAChBf,QAAQ,EAAEA;IACZ,CACF,CAAC,CACAiB,IAAI,CAAEN,IAAI,IAAK;MACd;MACCA,IAAI,GAAIT,UAAU,CAAC,IAAI,CAAC,GAAGA,UAAU,CAAC,KAAK,CAAC;MAE7CW,OAAO,CAACC,GAAG,CAACH,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,CAAC;MACzBR,WAAW,CAACQ,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC,CAAC;EACJ;EAAC;EAEDC,SAAS,CAAC,CAAC;EAEXC,OAAO,CAACC,GAAG,CAACb,OAAO,CAAC;EAEpB,OACGA,OAAO,gBACRP,OAAA;IAAKwB,SAAS,EAAC,iBAAiB;IAAAC,QAAA,eAC5BzB,OAAA;MAAQ0B,EAAE,EAAC;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrB,CAAC,gBAEN9B,OAAA;IAAKwB,SAAS,EAAC,iBAAiB;IAAAC,QAAA,eAC5BzB,OAAA;MAAQ0B,EAAE,EAAC;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrB,CAAC;AAEV;AAAC1B,EAAA,CAnDQD,aAAa;AAAA4B,EAAA,GAAb5B,aAAa;AAqDtB,eAAeA,aAAa;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}